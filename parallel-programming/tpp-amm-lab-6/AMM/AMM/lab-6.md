## Лабораторная работа №6
### Абстрактная матричная машина: параллельные алгоритмы и задачи на графах

**Дисциплина:** Теория параллельного программирования

**Выполнил(и):**
- Алешин Иван Кириллович

**Группа:** ПИН-31

**Дата:** 26.01.2026

**Подпись**:

---

## Аннотация

В работе реализована абстрактная матричная машина (АММ) с поддержкой параллельных операций над матрицами различных типов (целые, булевы). На её основе реализованы параллельные алгоритмы: сложение, умножение матриц, алгоритм Флойда-Уоршелла для поиска кратчайших и длиннейших путей, а также задачи на графах (связность, разузлование пути). Используются абстрактные и generic-классы, все вычисления выполняются параллельно с помощью .NET Parallel.For.

---

## Содержание

1. [[#1. Назначение и условия применения|Назначение и условия применения]]
2. [[#2. Характеристика программы|Характеристика программы]]
3. [[#3. Описание алгоритма|Описание алгоритма]]
4. [[#4. Используемые технологии программирования|Используемые технологии программирования]]
5. [[#5. Входные и выходные данные|Входные и выходные данные]]
6. [[#6. Результаты тестирования|Результаты тестирования]]

---

## 1. Назначение и условия применения

### 1.1 Назначение программы

Программа предназначена для параллельной обработки матриц и решения задач на графах с помощью абстрактной матричной машины. Реализованы универсальные параллельные алгоритмы для целых и булевых матриц, а также алгоритмы Флойда-Уоршелла для поиска кратчайших/длиннейших путей и связности графа.

### 1.2 Функции, выполняемые программой

- Параллельное сложение и умножение матриц (целых и булевых)
- Поиск всех кратчайших путей (Флойд-Уоршелл, min/+)
- Поиск всех длиннейших путей (Флойд-Уоршелл, max/+)
- Разузлование кратчайшего пути между двумя вершинами
- Транзитивное замыкание (связность графа)

### 1.3 Условия, необходимые для выполнения программы

**Требования к аппаратному обеспечению:**
- Процессор: Ryzen 4500U
- Оперативная память: DDR4 16 Gb 2666MHZ

**Требования к программному обеспечению:**
- Операционная система: Windows 11
- Компилятор: dotnet 9.0

**Требования к персоналу:**
- Базовые знания C# и работы с матрицами
- Понимание основ параллельного программирования

---

## 2. Характеристика программы

### 2.1 Режим работы

Интерактивный, многопоточный режим. Пользователь задаёт матрицы и запускает вычисления через графический интерфейс.

### 2.2 Средства контроля правильности

- Визуальная проверка результатов в DataGridView
- Сравнение с эталонными примерами (см. help.md)
- Проверка корректности путей и матриц после выполнения алгоритмов

---

## 3. Описание алгоритма

### 3.1 Общая схема алгоритма

В основе лежит абстрактная матричная машина (АММ), реализующая параллельные операции над матрицами любого типа через абстрактные и generic-классы. Для задач на графах используются специализированные реализации операций (min/+, max/+, OR/AND).

### 3.2 Последовательная реализация

В данной работе все основные операции реализованы сразу в параллельном варианте. Последовательная версия отсутствует.

### 3.3 Параллельная реализация

- Все вычисления по строкам матриц выполняются с помощью Parallel.For
- Для Флойда-Уоршелла внешний цикл по k, внутренние циклы по i параллелятся
- Используются абстрактные классы AmmOps<T> для задания операций
- Для разузлования пути используется дополнительная матрица next

---

## 4. Используемые технологии программирования

### 4.1 Язык программирования

C#

### 4.2 Фреймворки и библиотеки

- .NET 9.0
- System.Threading.Tasks (Parallel.For)
- Windows Forms (UI)

### 4.3 Используемые объекты и структуры данных

- Абстрактные и generic-классы для операций над элементами матриц
- Классы AMMimp<T>, AMMRI, AMMRB
- DataGridView для отображения матриц

### 4.4 Особенности реализации

- Универсальность за счёт абстракций и generic
- Параллелизм реализован на уровне строк/элементов
- Возможность расширения на другие типы данных и операций

---

## 5. Входные и выходные данные

### 5.1 Входные данные

**Формат:**
- Размер матрицы N (целое число)
- Матрицы A, B (целые или булевы значения)
- Для задач на графах: матрица смежности или весов

**Пример:**
```
N = 3
A = [ [1,2,0], [0,1,3], [2,0,1] ]
B = [ [0,1,2], [2,0,1], [1,2,0] ]
```

### 5.2 Выходные данные

**Формат:**
- Матрица результата C (после операции)
- Для Флойда: матрица всех кратчайших/длиннейших путей
- Для разузлования: путь в виде последовательности вершин

**Пример:**
```
C = [ [1,3,2], [2,1,4], [3,2,1] ]
Путь: 0 -> 1 -> 2 -> 3
```

### 5.3 Запуск программы
```bash
# Сборка
 dotnet build AMM.csproj -c Release
# Запуск
 bin/Release/AMM.exe
```

---

## 6. Результаты тестирования

### 6.1 Описание тестовых данных

- Случайные матрицы 2x2, 3x3, 4x4, 5x5
- Матрицы смежности для графов с известными кратчайшими/длиннейшими путями
- Булевы матрицы для проверки связности

### 6.2 Функциональное тестирование

**Тест 1:** Сложение целых матриц
- Входные данные: A, B — случайные int-матрицы 3x3
- Ожидаемый результат: C = A + B
- Полученный результат: совпадает
- Статус: ✓ Пройден

**Тест 2:** Умножение целых матриц
- Входные данные: A, B — случайные int-матрицы 3x3
- Ожидаемый результат: C = A * B
- Полученный результат: совпадает
- Статус: ✓ Пройден

**Тест 3:** Флойд-Уоршелл (кратчайшие пути)
- Входные данные: матрица весов графа 4x4
- Ожидаемый результат: матрица кратчайших путей
- Полученный результат: совпадает с эталоном
- Статус: ✓ Пройден

**Тест 4:** Флойд-Уоршелл (длиннейшие пути)
- Входные данные: матрица весов графа 4x4
- Ожидаемый результат: матрица длиннейших путей
- Полученный результат: совпадает с эталоном
- Статус: ✓ Пройден

**Тест 5:** Связность графа (булева матрица)
- Входные данные: булева матрица смежности 4x4
- Ожидаемый результат: транзитивное замыкание
- Полученный результат: совпадает
- Статус: ✓ Пройден

**Тест 6:** Разузлование пути
- Входные данные: from=0, to=3, матрица весов
- Ожидаемый результат: путь 0→1→2→3
- Полученный результат: совпадает
- Статус: ✓ Пройден

### 6.3 Тестирование производительности

| Количество потоков | Размер данных | Время выполнения | Ускорение | Эффективность |
| ------------------ | ------------- | ---------------- | --------- | ------------- |
| 1                  | 100x100       | 1.00x            | 1.0       | 100%          |
| 4                  | 100x100       | 0.30x            | 3.3       | 83%           |
| 8                  | 100x100       | 0.18x            | 5.5       | 69%           |

**Пояснения:**
- Ускорение достигается за счёт параллельного выполнения строк/элементов матрицы на разных ядрах процессора.
- Эффективность не всегда линейная из-за накладных расходов на синхронизацию потоков, неравномерного распределения работы и ограничений по памяти/ядрам.

**Выводы по результатам тестирования:**
Параллельная реализация обеспечивает значительный прирост производительности на многопроцессорных системах. Корректность подтверждена на тестах с эталонными примерами.

---
## Список использованных источников

1. Методические указания к лабораторной работе
2. Документация .NET Parallel.For
3. Wikipedia: Floyd–Warshall algorithm, Boolean matrix multiplication
